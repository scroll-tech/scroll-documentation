---
section: developers
date: Last Modified
title: "Bridge per NFT ERC721"
lang: "it"
permalink: "developers/l1-and-l2-bridging/erc721-nft-bridge"
excerpt: "NFT bridging from L1 to L2 is done via the L1ERC721Gateway contract instead of using a router."
whatsnext: { "Bridge per Token ERC1155": "/it/developers/l1-and-l2-bridging/erc1155-token-bridge/" }
---

import Aside from "../../../../../components/Aside.astro"

## Deposito di token ERC721 da L1

Il bridge per i token NFT da L1 a L2 avviene tramite il contratto `L1ERC721Gateway` anziché utilizzando un router. Similmente al bridge dei token ERC20, utilizziamo la funzione `depositERC721` per inviare i token a L2 e successivamente possiamo recuperarli su L1 usando `withdrawERC721` sul contratto `L2ERC721Gateway` deployato su L2.

I contratti NFT su entrambi L1 e L2 devono essere lanciati e collegati attraverso i Gateway per abilitare il bridge. Ciò significa che le transazioni di deposito e prelievo verranno annullate se manca un contratto su L1 o L2 o se non è mappato tramite la funzione `updateTokenMapping`.

<Aside type="tip" title="">
  **`depositERC721`** è una funzione pagabile. L'importo di ETH inviato a questa funzione verrà utilizzato per pagare le commissioni su L2. Se l'importo non è sufficiente, la transazione non verrà inviata. Eventuali ETH in eccesso saranno restituiti al mittente. `0.00001 ETH` dovrebbe essere sufficiente per elaborare un deposito di token.
</Aside>

### Creazione di un token ScrollERC721 su L2

Per depositare un token ERC721 su L2, è necessario lanciare un contratto token compatibile con lo standard `IScrollERC721` e mapparlo su `L1ERC721Gateway` e `L2ERC721Gateway` su L1 e L2 rispettivamente. Questo contratto deve concedere il permesso al Gateway su L2 di emettere quando un token viene depositato e bruciare quando il token viene prelevato.

La seguente interfaccia è l'`IScrollERC721` necessaria per il lancio di token ERC721 compatibili con `L2ERC721Gateway` su L2.

```solidity
interface IScrollERC721 {
  /// @notice Return the address of Gateway the token belongs to.
  function gateway() external view returns (address);

  /// @notice Return the address of counterpart token.
  function counterpart() external view returns (address);

  /// @notice Mint some token to recipient's account.
  /// @dev Gateway Utilities, only gateway contract can call
  /// @param _to The address of recipient.
  /// @param _tokenId The token id to mint.
  function mint(address _to, uint256 _tokenId) external;

  /// @notice Burn some token from account.
  /// @dev Gateway Utilities, only gateway contract can call
  /// @param _tokenId The token id to burn.
  function burn(uint256 _tokenId) external;
}
```
### Aggiunta di NFT ERC721 al Bridge di Scroll

Tutti gli asset possono essere "bridged" in modo sicuro e senza permessi attraverso contratti Gateway deployati da qualsiasi sviluppatore. Tuttavia, Scroll gestisce anche un contratto Gateway ERC721 dove tutti i NFT creati dalla comunità sono benvenuti. Essere parte del Gateway gestito da Scroll significa che non è necessario deployare i contratti Gateway e il tuo token apparirà nel frontend ufficiale di Scroll. Per far parte del Gateway di Scroll, è necessario contattare il team di Scroll per aggiungere il NFT sia nei contratti Gateway di L1 che di L2. Segui le istruzioni nel repository [token lists](https://github.com/scroll-tech/token-list) per aggiungere un nuovo token al frontend ufficiale di Scroll.

## Prelievo di token ERC721 da Scroll

Il contratto `L2ERC721Gateway` viene utilizzato per inviare token da L2 a L1. Prima di effettuare il bridge, il contratto `L2ERC721Gateway` deve essere approvato dal contratto NFT. Una volta fatto ciò, è possibile chiamare `withdrawERC721` per eseguire il bridge dell'asset.

<Aside type="tip" title="">
  **`withdrawERC721`** è una funzione pagabile, e l'importo di ETH inviato a questa funzione verrà utilizzato per pagare le commissioni su L1. Se l'importo non è sufficiente, la transazione non verrà inviata. Eventuali ETH in eccesso saranno restituiti al mittente. Le commissioni dipendono dall'attività su L1, ma `0.005 ETH` dovrebbe essere sufficiente per elaborare il prelievo di un token.
</Aside>

<Aside type="caution" title="">
  **Assicurati che la transazione non fallisca su L1** durante l'invio da L2. Non c'è modo di recuperare gli NFT "bridged" se la tua transazione fallisce su L1. Tutti gli asset vengono distrutti su L2 quando la transazione viene inviata, e non è possibile generarli nuovamente.
</Aside>

## API di L1ERC721Gateway

Per la documentazione completa dell'API dei contratti di Scroll, visita la [libreria npm](https://www.npmjs.com/package/@scroll-tech/contracts?activeTab=code).


```solidity
function depositERC721(address _token, address _to, uint256 _tokenId, uint256 _gasLimit) external payable;
```
Deposita un NFT ERC721 da L1 all'account del destinatario su L2.

| Parametro | Descrizione                                       |
| --------- | ------------------------------------------------- |
| token     | L'indirizzo del contratto ERC721 NFT su L1.       |
| to        | L'indirizzo dell'account del destinatario su L2.  |
| tokenId   | L'ID del NFT da depositare.                        |
| gasLimit  | Limite di gas necessario per completare il deposito su L2. La parte non utilizzata delle commissioni verrà rimborsata. |
### updateTokenMapping

```solidity
function updateTokenMapping(address _l1Token, address _l2Token) external;
```

Aggiorna la mappatura che collega un contratto NFT da L1 a L2.

| Parametro   | Descrizione                                         |
| ----------- | --------------------------------------------------- |
| \_l1Token   | L'indirizzo del token ERC721 su L1.                 |
| \_l2Token   | L'indirizzo corrispondente del token ERC721 su L2.  |
## L2ERC721Gateway API

### withdrawERC721

```solidity
function withdrawERC721(address _token, address _to, uint256 _tokenId, uint256 _gasLimit) external payable;
```
Invia un ERC721 NFT da L2 all'account del destinatario su L1.

| Parametro | Descrizione                                                              |
| --------- | ------------------------------------------------------------------------ |
| token     | L'indirizzo del contratto del token ERC721 NFT su L2.                     |
| to        | L'indirizzo dell'account del destinatario su L1.                          |
| tokenId   | L'ID dell'NFT da inviare.                                                 |
| gasLimit  | Non utilizzato attualmente, incluso per considerazioni di compatibilità futura. |

### updateTokenMapping

```solidity
function updateTokenMapping(address _l1Token, address _l2Token) external;
```
Aggiorna la mappatura che collega un contratto NFT da L2 a L1.

| Parametro  | Descrizione                                        |
| ---------- | -------------------------------------------------- |
| \_l2Token  | L'indirizzo del contratto ERC721 su L2.             |
| \_l1Token  | L'indirizzo corrispondente del contratto ERC721 su L1. |
