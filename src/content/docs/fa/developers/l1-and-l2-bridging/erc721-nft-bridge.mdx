---
section: developers
date: Last Modified
title: "بریج ERC721 NFT"
lang: "fa"
permalink: "developers/l1-and-l2-bridging/erc721-nft-bridge"
excerpt: "بریج NFT از L1 به L2 از طریق قرارداد L1ERC721Gateway انجام می‌شود به جای استفاده از یک روتر."
whatsnext: { "بریج توکن ERC1155": "/fa/developers/l1-and-l2-bridging/erc1155-token-bridge/" }
---

import Aside from "../../../../../components/Aside.astro"

## واریز توکن‌های ERC721 از L1

بریج NFT از L1 به L2 از طریق قرارداد `L1ERC721Gateway` انجام می‌شود به جای استفاده از یک روتر. مشابه به بریج توکن‌های ERC20، از تابع `depositERC721` برای ارسال توکن‌ها به L2 استفاده می‌کنیم و می‌توانیم آن‌ها را بعداً به L1 با استفاده از `withdrawERC721` در قرارداد `L2ERC721Gateway` مستقر شده در L2 بازیابی کنیم.

قراردادهای NFT در هر دو شبکه L1 و L2 باید راه‌اندازی و از طریق Gateways متصل شوند تا بریج امکان‌پذیر باشد. این بدان معنی است که تراکنش‌های واریز و برداشت در صورت عدم وجود یا عدم نقشه‌برداری صحیح قرارداد در هر یک از L1 یا L2 با استفاده از تابع `updateTokenMapping` برگشت خواهند خورد.

<Aside type="tip" title="">
  **`depositERC721`** یک تابع قابل پرداخت است. مقدار ETH ارسال شده به این تابع برای پرداخت هزینه‌های L2 استفاده می‌شود. اگر مقدار کافی نباشد، تراکنش ارسال نخواهد شد. تمامی ETH اضافی به فرستنده بازگردانده خواهد شد. `0.00001 ETH` بیشتر از کافی برای پردازش یک واریز توکن است.
</Aside>

### ایجاد توکن ScrollERC721 در L2

برای واریز یک توکن ERC721 به L2، باید یک قرارداد توکن مطابق با استاندارد `IScrollERC721` راه‌اندازی و در `L1ERC721Gateway` و `L2ERC721Gateway` در هر دو شبکه L1 و L2 نقشه‌برداری شود. این قرارداد باید اجازه دهد تا Gateway در L2 هنگام واریز توکن‌ها را ضرب و هنگام برداشت توکن‌ها را بسوزاند.

در زیر رابط `IScrollERC721` مورد نیاز برای استقرار توکن‌های ERC721 سازگار با `L2ERC721Gateway` در L2 آمده است:

```solidity
interface IScrollERC721 {
  /// @notice آدرس Gateway که توکن به آن تعلق دارد را برمی‌گرداند.
  function gateway() external view returns (address);

  /// @notice آدرس توکن معادل را برمی‌گرداند.
  function counterpart() external view returns (address);

  /// @notice مقداری توکن را به حساب دریافت‌کننده ضرب می‌کند.
  /// @dev ابزارهای Gateway، فقط قرارداد Gateway می‌تواند این تابع را فراخوانی کند.
  /// @param _to آدرس دریافت‌کننده.
  /// @param _tokenId شناسه توکن برای ضرب.
  function mint(address _to, uint256 _tokenId) external;

  /// @notice مقداری توکن را از حساب می‌سوزاند.
  /// @dev ابزارهای Gateway، فقط قرارداد Gateway می‌تواند این تابع را فراخوانی کند.
  /// @param _tokenId شناسه توکن برای سوزاندن.
  function burn(uint256 _tokenId) external;
}
```

### افزودن NFTهای ERC721 به بریج Scroll

تمامی دارایی‌ها می‌توانند به طور ایمن و بدون نیاز به مجوز از طریق قراردادهای Gateway که توسط هر توسعه‌دهنده‌ای مستقر شده است بریج شوند. با این حال، Scroll همچنین یک قرارداد Gateway برای ERC721 را مدیریت می‌کند که در آن تمامی NFTهای ایجاد شده توسط جامعه خوش‌آمد گفته می‌شود. عضویت در Gateway مدیریت‌شده توسط Scroll به این معنی است که نیازی به استقرار قراردادهای Gateway نخواهید داشت و توکن شما در رابط کاربری Scroll نمایش داده خواهد شد. برای عضویت در Gateway Scroll، باید با تیم Scroll تماس بگیرید تا NFT را در هر دو قرارداد Gateway در L1 و L2 اضافه کنند. برای این کار، به دستورالعمل‌های موجود در مخزن [لیست توکن‌ها](https://github.com/scroll-tech/token-list) برای افزودن توکن جدید به رابط کاربری رسمی Scroll مراجعه کنید.

## برداشت توکن‌های ERC721 از Scroll

قرارداد `L2ERC721Gateway` برای ارسال توکن‌ها از L2 به L1 استفاده می‌شود. قبل از بریج، قرارداد `L2ERC721Gateway` باید توسط قرارداد NFT تأیید شده باشد. پس از انجام این کار، می‌توان از تابع `withdrawERC721` برای انجام بریج دارایی استفاده کرد.

<Aside type="tip" title="">
  **`withdrawERC721`** یک تابع قابل پرداخت است و مقدار ETH ارسال شده به این تابع برای پرداخت هزینه‌های L1 استفاده می‌شود. اگر مقدار کافی نباشد، تراکنش ارسال نخواهد شد. تمامی ETH اضافی به فرستنده بازگردانده خواهد شد. هزینه‌ها به فعالیت L1 بستگی دارند اما `0.005 ETH` باید برای پردازش برداشت توکن کافی باشد.
</Aside>

<Aside type="caution" title="">
  **اطمینان حاصل کنید که تراکنش در L1 به دلیل ارسال از L2 برگشت نمی‌خورد.** در صورت برگشت تراکنش در L1، امکان بازیابی NFT بریج شده وجود ندارد. تمامی دارایی‌ها در L2 هنگام ارسال تراکنش سوزانده می‌شوند و امکان ضرب آن‌ها دوباره وجود ندارد.
</Aside>

## API قرارداد L1ERC721Gateway

لطفاً برای مستندات کامل API قرارداد Scroll به [کتابخانه npm](https://www.npmjs.com/package/@scroll-tech/contracts?activeTab=code) مراجعه کنید.

### depositERC721

```solidity
function depositERC721(address _token, address _to, uint256 _tokenId, uint256 _gasLimit) external payable;
```

واریز یک NFT ERC721 از L1 به حساب دریافت‌کننده در L2.

| پارامتر | توضیحات                                       |
| ------- | --------------------------------------------- |
| token   | آدرس قرارداد NFT ERC721 در L1.                |
| to      | آدرس حساب دریافت‌کننده در L2.                |
| tokenId | شناسه NFT برای واریز.                        |
| gasLimit| محدودیت گس مورد نیاز برای تکمیل واریز در L2. بخش غیرقابل استفاده از هزینه‌ها بازگردانده می‌شود. |

### updateTokenMapping

```solidity
function updateTokenMapping(address _l1Token, address _l2Token) external;
```

به‌روزرسانی نقشه‌برداری که یک قرارداد NFT را از L1 به L2 متصل می‌کند.

| پارامتر | توضیحات                                    |
| ------- | ------------------------------------------ |
| \_l1Token | آدرس توکن ERC721 در L1.                    |
| \_l2Token | آدرس توکن معادل ERC721 در L2.              |

## API قرارداد L2ERC721Gateway

### withdrawERC721

```solidity
function withdrawERC721(address _token, address _to, uint256 _tokenId, uint256 _gasLimit) external payable;
```

ارسال یک NFT ERC721 از L2 به حساب دریافت‌کننده در L1.

| پارامتر | توضیحات                                                               |
| ------- | --------------------------------------------------------------------- |
| token   | آدرس قرارداد توکن NFT ERC721 در L2.                                   |
| to      | آدرس حساب دریافت‌کننده در L1.                                         |
| tokenId | شناسه NFT برای برداشت.                                                |
| gasLimit| غیرقابل استفاده است، اما برای سازگاری آینده در نظر گرفته شده است.  |

### updateTokenMapping

```solidity
function updateTokenMapping(address _l1Token, address _l2Token) external;
```

به‌روزرسانی نقشه‌برداری که یک قرارداد NFT را از L2 به L1 متصل می‌کند.

| پارامتر | توضیحات                                    |
| ------- | ------------------------------------------ |
| \_l2Token | آدرس توکن ERC721 در L2.                    |
| \_l1Token | آدرس توکن معادل ERC721 در L1.              |
