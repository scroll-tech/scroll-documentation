---
section: technology
date: Last Modified
title: "ارتقاء‌های Scroll"
lang: "fa"
dir: "rtl"
permalink: "technology/overview/scroll-upgrades"
---

با پیشرفت تیم در نقشه راه اسکرول، شبکه اسکرول را برای افزودن ویژگی‌ها و بهبود‌های جدید ارتقاء خواهیم داد.

قراردادهای زیر برای شروع و اجرای ارتقاء پس از دوره‌ی دو هفته‌ای تایملوک استفاده می‌شوند:

| قرارداد         | شبکه                                                      | آدرس | 
| ------------------------ | ------- | - | 
| مولتی‌سیگ اسکرول L1 | اتریوم | [`0xEfc9D1096fb65c832207E5e7F13C2D1102244dbe`](https://etherscan.io/address/0xEfc9D1096fb65c832207E5e7F13C2D1102244dbe)| 
| تایملوک L1 |  اتریوم | [`0x1A658B88fD0a3c82fa1a0609fCDbD32e7dd4aB9C`](https://etherscan.io/address/0x1A658B88fD0a3c82fa1a0609fCDbD32e7dd4aB9C)| 
| مولتی‌سیگ اسکرول L2 | اسکرول | [`0xEfc9D1096fb65c832207E5e7F13C2D1102244dbe`](https://scrollscan.com/address/0xEfc9D1096fb65c832207E5e7F13C2D1102244dbe)|
| تایملوک L2 | اسکرول | [`0xf6069DB81239E5194bb53f83aF564d282357bc99`](https://scrollscan.com/address/0xf6069DB81239E5194bb53f83aF564d282357bc99)|

می‌توانید به [کانال تلگرام ما برای به‌روزرسانی‌های فنی](https://t.me/scroll_tech_updates) بپیوندید، که شامل اعلامیه‌های ارتقاء آینده و رویدادهای عملیات زنجیره‌ای است.

## ارتقاء Curie

### مروری

این ارتقاء مهم هزینه‌های گس را در زنجیره اسکرول 1.5 برابر کاهش می‌دهد. نکات برجسته عبارتند از:

- فشرده‌سازی داده‌های ذخیره‌شده در بلوک‌ها با استفاده از الگوریتم [zstd](https://github.com/scroll-tech/da-codec/tree/main/libzstd). این فشرده‌سازی اندازه داده‌ها را کاهش می‌دهد و به هر بلوک امکان می‌دهد تراکنش‌های بیشتری ذخیره کند و در نتیجه هزینه دسترسی به داده‌ها برای هر تراکنش کاهش یابد.
- استفاده از نسخه‌ی اصلاح‌شده مدل قیمت‌گذاری EIP-1559 که با رابط تراکنش EIP-1559 سازگار است، مزایایی مانند قیمت‌گذاری دقیق‌تر تراکنش‌ها و ساختار هزینه پیش‌بینی‌پذیرتر و پایدارتر را به ارمغان می‌آورد.
- پشتیبانی از اپکدهای جدید EVM `TLOAD`، `TSTORE` و `MCOPY`. کاربران می‌توانند با اطمینان از آخرین نسخه کامپایلر Solidity `0.8.26` برای ساخت قراردادها استفاده کنند.
- معرفی زمان بلوک پویا. در دوره‌های ترافیک شلوغ، یک بلوک هنگامی بسته می‌شود که تعداد تراکنش‌ها به حد مدار برسد و نه انتظار برای بازه‌ی 3 ثانیه.

### جدول زمانی

- **Scroll Sepolia**
	- ارتقاء شبکه: 17 ژوئن 2024
- **Scroll Mainnet**
	- شروع ارتقاء: 20 ژوئن 2024
	- تکمیل تایملوک و ارتقاء: 3 ژوئیه 2024

### جزئیات فنی

#### تغییرات قرارداد

تغییرات کد برای این ارتقاء در PRهای زیر مستند شده‌اند:

- [پذیرش دسته‌های فشرده‌شده](https://github.com/scroll-tech/scroll/pull/1317)
- [به‌روزرسانی `L1GasPriceOracle`](https://github.com/scroll-tech/scroll/pull/1343)
- [تغییر `MAX_COMMIT_SCALAR` و `MAX_BLOB_SCALAR` به 1e18](https://github.com/scroll-tech/scroll/pull/1354)
- [حذف بررسی شاخص دسته هنگام به‌روزرسانی یک تأییدکننده](https://github.com/scroll-tech/scroll/pull/1372)

تغییرات اصلی به شرح زیر است:

- قرارداد رول‌آپ (`ScrollChain`) اکنون دسته‌هایی با هر دو نسخه 1 و 2 را قبول خواهد کرد. [نسخه 1](https://github.com/scroll-tech/da-codec/tree/main/encoding/codecv1) برای بلوک‌های بدون فشرده‌سازی (پیش از Curie)، و [نسخه 2](https://github.com/scroll-tech/da-codec/tree/main/encoding/codecv2) برای بلوک‌های فشرده‌شده (پس از Curie) استفاده می‌شود.
- قرارداد `L1GasPriceOracle` به‌روزرسانی خواهد شد تا فرمول هزینه داده را برای حساب کردن بلوک DA تغییر دهد، ارائه برآورد دقیق‌تر از هزینه‌های DA:
    - فرمول اصلی: `(l1GasUsed(txRlp) + overhead) * l1BaseFee * scalar`
    - فرمول جدید: `l1BaseFee * commitScalar + len(txRlp) * l1BlobBaseFee * blobScalar`

#### تغییرات گره

نسخه جدید گره `v5.5.0` است. برای مشاهده فهرست تغییرات، به [یادداشت‌های نسخه](https://github.com/scroll-tech/go-ethereum/releases/tag/scroll-v5.5.0) مراجعه کنید.

#### تغییرات مدار zkEVM

نسخه جدید مدارهای zkevm `v0.11.4` است. برای مشاهده گزارش نسخه، [اینجا](https://github.com/scroll-tech/zkevm-circuits/releases/tag/v0.11.4) را ببینید.

#### ممیزی‌ها

- TrailofBits: به زودی!
- [Zellic](https://github.com/Zellic/publications/blob/master/Scroll%20zkEVM%20-%20Zellic%20Audit%20Report.pdf)

### سازگاری

#### گره‌های ترتیب‌دهنده و دنبال‌کننده (l2geth)

این ارتقاء یک فورک سخت است که اپکدهای `TLOAD`، `TSTORE` و `MCOPY` را معرفی می‌کند. اپراتورهایی که گره `l2geth` را اجرا می‌کنند باید قبل از بلوک فورک سخت، به‌روزرسانی کنند. برای اطلاعات بیشتر، به [یادداشت‌های نسخه گره](https://github.com/scroll-tech/go-ethereum/releases/tag/scroll-v5.4.2) مراجعه کنید.

#### dApps و شاخص‌ها

برای dApps، این ارتقاء با نسخه‌های قبلی سازگار است. توسعه‌دهندگان باید تنظیمات هزینه گس را برای تطبیق با مدل قیمت‌گذاری EIP-1559 تنظیم کنند. توجه داشته باشید که dApps نمی‌توانند دیگر بر زمان بلوک ثابت 3 ثانیه در منطق برنامه اعتماد کنند.

برای شاخص‌ها، [فرمت داده](https://docs.scroll.io/en/technology/chain/rollup/#codec) همچنان یکسان باقی می‌ماند. با این حال، تغییراتی در محتوای داده وجود خواهد داشت:

- فیلد `version` در `BatchHeader` از بلوک Curie به بعد به 2 تغییر خواهد کرد.
- داده‌های ذخیره‌شده در بلوک فشرده خواهند شد و می‌توانند با استفاده از [zstd v1.5.6](https://github.com/facebook/zstd/releases/tag/v1.5.6) از حالت فشرده خارج شوند.

## ارتقاء برنولی

### مروری

این ارتقاء شامل کاهش چشمگیر هزینه‌های تراکنش با معرفی پشتیبانی از داده‌های بلوک EIP-4844 و پشتیبانی از پیش‌کامپایل SHA2-256 است.

### جدول زمانی

- **Scroll Sepolia**
	- ارتقاء شبکه: 15 آوریل 2024
- **Scroll Mainnet**
	- شروع ارتقاء: 15 آوریل 2024
	- تکمیل تایملوک و ارتقاء: 29 آوریل 2024

### جزئیات فنی

#### تغییرات قرارداد

تغییرات قرارداد برای این ارتقاء در [این PR](https://github.com/scroll-tech/scroll/pull/1179) مستند شده‌اند، به همراه رفع خطاهای ممیزی [اینجا](https://github.com/scroll-tech/scroll/pulls?q=is%3Apr+created%3A2024-04-10..2024-04-11+fix+in%3Atitle+label%3Abug). تغییرات اصلی به شرح زیر است:

- `ScrollChain` اکنون دسته‌هایی با هر دو رمزنگاری داده یا بلوک را در `commitBatch` قبول می‌کند.
- `

L1GasPriceOracle` برای استفاده از فرمول هزینه داده‌های بلوک به‌روزرسانی شده است:
    - فرمول اصلی: `(l1GasUsed(txRlp) + overhead) * l1BaseFee * scalar`
    - فرمول جدید: `l1GasUsed(txRlp) * l1BaseFee * scalar`

#### تغییرات گره

نسخه جدید گره `v5.4.2` است. برای فهرست تغییرات، به [یادداشت‌های نسخه](https://github.com/scroll-tech/go-ethereum/releases/tag/scroll-v5.4.2) مراجعه کنید.

#### تغییرات مدار zkEVM

نسخه جدید مدارهای zkevm `v0.10.3` است. برای گزارش نسخه، [اینجا](https://github.com/scroll-tech/zkevm-circuits/releases/tag/v0.10.3) را ببینید.

#### ممیزی‌ها

- [Quarkslab](https://github.com/Quarkslab/publications/blob/master/Scroll%20zkEVM%20-%20Quarkslab%20Audit%20Report.pdf)
- [Zellic](https://github.com/Zellic/publications/blob/master/Scroll%20zkEVM%20-%20Zellic%20Audit%20Report.pdf)

### سازگاری

#### گره‌های ترتیب‌دهنده و دنبال‌کننده (l2geth)

این ارتقاء یک فورک سخت است که پیش‌کامپایل SHA2-256 را معرفی می‌کند. اپراتورهایی که گره `l2geth` را اجرا می‌کنند باید قبل از بلوک فورک سخت، به‌روزرسانی کنند. برای اطلاعات بیشتر، به [یادداشت‌های نسخه گره](https://github.com/scroll-tech/go-ethereum/releases/tag/scroll-v5.4.2) مراجعه کنید.

#### dApps و شاخص‌ها

برای dApps، این ارتقاء با نسخه‌های قبلی سازگار است. توسعه‌دهندگان باید تنظیمات هزینه گس را برای تطبیق با مدل قیمت‌گذاری EIP-1559 تنظیم کنند. توجه داشته باشید که dApps نمی‌توانند دیگر بر زمان بلوک ثابت 3 ثانیه در منطق برنامه اعتماد کنند.

برای شاخص‌ها، [فرمت داده](https://docs.scroll.io/en/technology/chain/rollup/#codec) همچنان یکسان باقی می‌ماند. با این حال، تغییراتی در محتوای داده وجود خواهد داشت:

- فیلد `version` در `BatchHeader` از بلوک Curie به بعد به 2 تغییر خواهد کرد.
- داده‌های ذخیره‌شده در بلوک فشرده خواهند شد و می‌توانند با استفاده از [zstd v1.5.6](https://github.com/facebook/zstd/releases/tag/v1.5.6) از حالت فشرده خارج شوند.

---

