---
section: technology
date: Last Modified
title: "تراکنش ها"
lang: "fa"
dir: "rtl"
permalink: "technology/chain/transactions"
whatsnext: { "بلوک ها": "/fa/technology/chain/blocks/" }
---

import ClickToZoom from "../../../../../components/ClickToZoom.astro"
import TransactionBatching from "../_images/batching.png"

یک معامله پیامی است که به صورت رمزنگاری شده امضا شده و یک تغییر وضعیت به وضعیت زنجیره را آغاز می‌کند. این می‌تواند یک انتقال ساده موجودی یا فراخوانی یک قرارداد هوشمند باشد که به نوبه خود برنامه‌ای را اجرا می‌کند تا وضعیت را تغییر دهد.

## نوع معامله

در حال حاضر، Scroll سه نوع معامله را پشتیبانی می‌کند.

- معامله Pre-EIP-155: این برای پشتیبانی از قرارداد [Singleton Factory](https://eips.ethereum.org/EIPS/eip-2470) است.
- معامله Legacy (مراجعه به [EIP-155](https://eips.ethereum.org/EIPS/eip-155))
- معامله نوع `L1MessageTx` (نوع: `0x7E`): این نوع معامله جدید [EIP-2718](https://eips.ethereum.org/EIPS/eip-2718) است که در Scroll معرفی شده است و در زیر توضیح داده شده است. این نوع معامله برای معاملاتی است که در L1 آغاز می‌شوند.

توجه داشته باشید که نوع معاملات [EIP-2930](https://eips.ethereum.org/EIPS/eip-2930) و [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559) در حال حاضر توسط Scroll پشتیبانی نمی‌شود. Scroll در آینده این دو نوع معامله را دوباره به سیستم اضافه خواهد کرد.

### معامله پیام L1

ما نوع جدیدی از معامله به نام `L1MessageTx` برای معاملات آغاز شده در L1 معرفی کرده‌ایم. این نوع معامله در قرارداد پل L1 آغاز می‌شود. هر بار که یک پیام جدید به قرارداد `L1MessageQueue` در L1 اضافه می‌شود، Sequencer در L2 یک معامله `L1MessageTx` معادل ایجاد می‌کند تا در بلوک‌های L2 گنجانده شود. از آنجا که امضا به طور ضمنی زمانی که کاربران معامله را در L1 ارسال کردند، بررسی شده است، معاملات `L1MessageTx` نیازی به امضا ندارند.

نوع معامله `L1MessageTx` `0x7E` است و بارگذاری آن به صورت زیر تعریف شده است.

```go
type L1MessageTx struct {
	QueueIndex uint64          // ایندکس صف در قرارداد L1
	Gas        uint64          // محدودیت گس
	To         *common.Address // نمی‌تواند nil باشد، ما اجازه ایجاد قرارداد از L1 را نمی‌دهیم
	Value      *big.Int
	Data       []byte
	Sender     common.Address
}
```

کدگذاری RLP معاملات `L1MessageTx` از قاعده [EIP-2718](https://eips.ethereum.org/EIPS/eip-2718) پیروی می‌کند که شامل `TransactionType || TransactionPayload` است، جایی که `TransactionType` برابر با `0x7E` و `TransactionPayload = RLP(L1MessageTx)` است.

دو رفتار قابل توجه معاملات `L1MessageTx`:

- `QueueIndex` در معامله، ایندکس صف در صف پیام L1 است و با `Nonce` حساب `Sender` متفاوت است. اما `Nonce` فرستنده هنوز هم بعد از معامله به میزان 1 افزایش می‌یابد.
- این نوع معاملات هزینه [L2 fee](/developers/transaction-fees-on-scroll#l2-fee) یا [L1 fee](/developers/transaction-fees-on-scroll#l1-fee) را پرداخت نمی‌کنند. هزینه L2 قبلاً زمانی که کاربران معاملات را در L1 ارسال می‌کنند، پرداخت شده است. هزینه L1 نیز دریافت نمی‌شود زیرا داده‌های معاملات `L1MessageTx` قبلاً در قرارداد پل L1 موجود است.

## چرخه عمر معامله

چرخه عمر معامله در Scroll شامل سه مرحله زیر است:

1. **تأیید شده**: کاربران معامله‌ای را به قرارداد پل L1 یا Sequencer L2 ارسال می‌کنند. معامله پس از اجرا و گنجاندن در یک بلوک L2، به وضعیت `تأیید شده` تبدیل می‌شود.
2. **متعهد شده**: معاملات در یک دسته قرار می‌گیرند و یک _معامله تعهد_ که شامل داده‌های این دسته است، به L1 ارسال می‌شود. پس از نهایی شدن معامله تعهد در بلوک‌های L1، معاملات در این دسته به وضعیت `متعهد شده` تبدیل می‌شوند.
3. **نهایی شده**: اثبات اعتبار این دسته تولید و در L1 تأیید می‌شود. پس از نهایی شدن _معامله نهایی_ در L1، وضعیت معامله به `نهایی شده` تبدیل می‌شود و بخشی کاننیکال از زنجیره L2 Scroll می‌شود.

### ارسال معاملات

دو نقطه ورودی وجود دارد که کاربران می‌توانند معاملات را به Scroll ارسال کنند.

اول، کاربران می‌توانند معاملات را مستقیماً به Sequencer های L2 ارسال کنند. برای این